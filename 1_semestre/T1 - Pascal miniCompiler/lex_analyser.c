#include<stdbool.h>
#include<stdio.h>
#include<stdint.h>
#include<ctype.h>
#include<string.h>
#include"lex_analyser.h"

const int estado_inicial=3;

#define symbol_quantity  3+53
#define state_quantity   3+84

char lex_error = '.';
char last_read_token[63] = "aaaa";

const uint8_t simbolos[128] = 
{
//			Tabela ascii
//	 0  1  2  3  4  5  6  7  8  9 
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 1,

//	\n 11 12 13 14 15 16 17 18 19
	 2, 1, 1, 1, 0, 0, 0, 0, 0, 0,

//	20 21 22 23 24 25 26 27 28 29
	 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,

//	30 31 ws  !  "  #  $  %  &  '
	 0, 0, 1, 0, 0, 0, 0, 0, 0, 0,

//	 (  )  *  +  ,  -  .  /  0  1
	43,44,50,51,39,52,40, 0, 3, 4,

//	 2  3  4  5  6  7  8  9  :  ;
	 5, 6, 7, 8, 9,10,11,12,41,42,

//	 <  =  >  ?  @  A  B  C  D  E
	47,48,49, 0, 0,13,14,15,16,17,

//	 F  G  H  I  J  K  L  M  N  O
	18,19,20,21,22,23,24,25,26,27,

// 	 P  Q  R  S  T  U  V  W  X  Y
	28,29,30,31,32,33,34,35,36,37,

//	 Z  [  \  ]  ^  _  `  a  b  c
	38,45, 0,46, 0,53, 0,13,14,15,

//	 d  e  f  g  h  i  j  k  l  m
	16,17,18,19,20,21,22,23,24,25,

//	 n  o  p  q  r  s  t  u  v  w
	26,27,28,29,30,31,32,33,34,35,

//	 x  y  z  {  |  }  ~ DEL
	36,37,38,54, 0,55, 0, 0
};

const int8_t estados[state_quantity][symbol_quantity] =
{          /* il ws \n  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f  g  h  i  j  k  l  m  n  o  p  q  r  s  t  u  v  w  x  y  z  ,  .  :  ;  (  )  [  ]  <  =  >  *  +  -  _  {  } */ 
	/* 00 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //Ilegal
	/* 01 */ { 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //whitespaces
	/* 02 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //\n

	/* 03 */ { 0, 1, 2,86,86,86,86,86,86,86,86,86,86, 4, 5,62, 6, 7, 8,62,62, 9,62,62,62,62,10,11,12,62,62,62,13,62,14,15,62,62,62,67,64,65,63,68,69,70,71,73,72,76,80,78,79,62,84, 0}, //inicial
	/* 04 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,16,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 05 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,18,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 06 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,22,62,62,62,62,62,24,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 07 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,25,62,28,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 08 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,30,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 09 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,37,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 10 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,38,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 11 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,40,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 12 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,41,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 13 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,53,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 14 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,56,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 15 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,58,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 16 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,17,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 17 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //LOG_AND
	/* 18 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,19,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 19 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,20,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 20 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,21,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 21 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //BEGIN
	/* 22 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,23,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 23 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //DIVIDE
	/* 24 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //DO
	/* 25 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,26,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 26 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,27,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 27 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ELSE
	/* 28 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,29,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 29 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //END
	/* 30 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,31,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 31 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,32,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 32 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,33,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 33 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,34,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 34 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,35,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 35 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,36,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 36 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //FUNCTION
	/* 37 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //IF
	/* 38 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,39,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 39 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //LOG_NOT
	/* 40 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //LOG_OR
	/* 41 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,42,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 42 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,43,62,62,62,49,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 43 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,44,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 44 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,45,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 45 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,46,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 46 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,47,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 47 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,48,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 48 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //PROCEDURE
	/* 49 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,50,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 50 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,51,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 51 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,52,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 52 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //PROGRAM
	/* 53 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,54,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 54 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,55,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 55 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //THEN
	/* 56 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,57,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 57 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //VAR
	/* 58 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,59,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 59 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,60,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 60 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,61,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 61 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //WHILE
	/* 62 */ { 0, 0, 0,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62,62, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,62, 0, 0}, //ID
	/* 63 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //SEMICOLON
	/* 64 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //PERIOD
	/* 65 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,66, 0, 0, 0, 0, 0, 0, 0}, //COLON
	/* 66 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //ATTRIBUTION
	/* 67 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //COMMA
	/* 68 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,81, 0, 0, 0, 0, 0}, //LPAREN
	/* 69 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //RPAREN
	/* 70 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //LBRACKET
	/* 71 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //RBRACKET
	/* 72 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //EQUALS
	/* 73 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,75,74, 0, 0, 0, 0, 0, 0}, //LESS
	/* 74 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //DIFF
	/* 75 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //LEQ
	/* 76 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,77, 0, 0, 0, 0, 0, 0, 0}, //GREAT
	/* 77 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //GEQ
	/* 78 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //PLUS
	/* 79 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //MINUS
	/* 80 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //MULTIPLY
	/* 81 */ {81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,82,81,81,81,81,81}, 
	/* 82 */ {81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,81,83,81,81,81,81,81,81,81,81,81,81,81},
	/* 83 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //COMMENT
	/* 84 */ {84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,84,85},
	/* 85 */ { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //COMMENT
	/* 86 */ { 0, 0, 0,85,86,86,86,86,86,86,86,86,86, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}, //NUMBER
};

char* tokenStringify(token_type token){
	switch(token){
		case TOKEN_EOF: 	return "EOF ";
		case TOKEN_ERROR:	return "ERROR ";
		case WHITESPACE:	return "ws ";
		case NEWLINE:		return "lf ";

		case LOG_AND:		return "LOG_AND ";
		case BEGIN:			return "BEGIN ";
		case DIVIDE:		return "DIVIDE ";
		case DO_t:			return "DO_t ";
		case ELSE_t:		return "ELSE_t ";
		case END:			return "END ";
		case FUNCTION:		return "FUNCTION ";
		case IF_t:			return "IF_t ";
		case LOG_NOT:		return "LOG_NOT ";
		case LOG_OR:		return "LOG_OR ";
		case PROCEDURE:		return "PROCEDURE ";
		case PROGRAM:		return "PROGRAM ";
		case THEN:			return "THEN ";
		case VAR:			return "VAR ";
		case WHILE_t:		return "WHILE_t ";
		case ID:			return "ID ";
		case SEMICOLON:		return "SEMICOLON ";
		case PERIOD:		return "PERIOD ";
		case COLON:			return "COLON ";
		case ATTRIBUTION:	return "ATTRIBUTION ";
		case COMMA:			return "COMMA ";
		case RPAREN:		return "RPAREN ";
		case LPAREN:		return "LPAREN ";
		case RBRACKET:		return "RBRACKET ";
		case LBRACKET:		return "LBRACKET ";
		case EQUALS:		return "EQUALS ";
		case LESS:			return "LESS ";
		case DIFF:			return "DIFF ";
		case LEQ:			return "LEQ ";
		case GREAT:			return "GREAT ";
		case GEQ:			return "GEQ ";
		case PLUS:			return "PLUS ";
		case MINUS:			return "MINUS ";
		case MULTIPLY:		return "MULTIPLY ";
		case COMMENT:		return "COMMENT ";
		case NUMBER:		return "NUMBER ";

		case PROGRAMA_nt:		return "PROGRAMA_nt ";
		case BLOCO_nt:			return "BLOCO_nt ";
		case BLOCO1_nt:			return "BLOCO1_nt ";
		case BLOCO_C1_nt:		return "BLOCO_C1_nt ";
		case BLOCO_C11_nt:		return "BLOCO_C11_nt ";
		case BLOCO_C2_nt:		return "BLOCO_C2_nt ";
		case TIPO_nt:			return "TIPO_nt ";
		case PARAMETROS_nt:		return "PARAMETROS_nt ";
		case PARAMETROS1_nt:	return "PARAMETROS1_nt ";
		case PARAMETROS11_nt:	return "PARAMETROS11_nt ";
		case PARAMETROS_C1_nt:	return "PARAMETROS_C1_nt ";
		case VARIAVEL1_nt:		return "VARIAVEL1_nt ";
		case VARIAVEL_C1_nt:	return "VARIAVEL_C1_nt ";
		case COMANDO_nt:		return "COMANDO_nt ";
		case COMANDO0_nt:		return "COMANDO0_nt ";
		case COMANDO1_nt:		return "COMANDO1_nt ";
		case COMANDO2_nt:		return "COMANDO2_nt ";
		case COMANDO_C1_nt:		return "COMANDO_C1_nt ";
		case COMANDO_C2_nt:		return "COMANDO_C2_nt ";
		case EXPRESSAO_nt:		return "EXPRESSAO_nt ";
		case EXPRESSAO1_nt:		return "EXPRESSAO1_nt ";
		case SINAL_nt:			return "SINAL_nt ";
		case EXP_SIMPLES_nt:	return "EXP_SIMPLES_nt ";
		case EXP_SIMPLES1_nt:	return "EXP_SIMPLES1_nt ";
		case TERMO_nt:			return "TERMO_nt ";
		case TERMO1_nt:			return "TERMO1_nt ";
		case FATOR_nt:			return "FATOR_nt ";
		case FATOR0_nt:			return "FATOR0_nt ";
		case FATOR_E_nt:		return "FATOR_E_nt ";
		case FATOR_E1_nt:		return "FATOR_E1_nt ";
		default:				return "this should not be possible!!! ";
	}
}

int selecionarPosicao(unsigned char caracter){
	return simbolos[caracter];
}

token_type getEstado(int estado){
	switch(estado){
		case  1: return WHITESPACE;
		case  2: return NEWLINE;
		case  4:
		case  5:
		case  6:
		case  7:
		case  8:
		case  9:
		case 10:
		case 11:
		case 12:
		case 13:
		case 14:
		case 15:
		case 16: return ID;
		case 17: return LOG_AND;
		case 18:
		case 19:
		case 20: return ID;
		case 21: return BEGIN;
		case 22: return ID;
		case 23: return DIVIDE;
		case 24: return DO_t;
		case 25:
		case 26: return ID;
		case 27: return ELSE_t;
		case 28: return ID;
		case 29: return END;
		case 30:
		case 31:
		case 32:
		case 33:
		case 34:
		case 35: return ID;
		case 36: return FUNCTION;
		case 37: return IF_t;
		case 38: return ID;
		case 39: return LOG_NOT;
		case 40: return LOG_OR;
		case 41:
		case 42:
		case 43:
		case 44:
		case 45:
		case 46:
		case 47: return ID;
		case 48: return PROCEDURE;
		case 49:
		case 50:
		case 51: return ID;
		case 52: return PROGRAM;
		case 53:
		case 54: return ID;
		case 55: return THEN;
		case 56: return ID;
		case 57: return VAR;
		case 58:
		case 59:
		case 60: return ID;
		case 61: return WHILE_t;
		case 62: return ID;
		case 63: return SEMICOLON;
		case 64: return PERIOD;
		case 65: return COLON;
		case 66: return ATTRIBUTION;
		case 67: return COMMA;
		case 68: return LPAREN;
		case 69: return RPAREN;
		case 70: return LBRACKET;
		case 71: return RBRACKET;
		case 72: return EQUALS;
		case 73: return LESS;
		case 74: return DIFF;
		case 75: return LEQ;
		case 76: return GREAT;
		case 77: return GEQ;
		case 78: return PLUS;
		case 79: return MINUS;
		case 80: return MULTIPLY;
		case 83: return COMMENT;
		case 85: return COMMENT;
		case 86: return NUMBER;
		default: return TOKEN_ERROR;
	}
}

/*
void imprimirCadeia(int posicao_inicial, int posicao_final, FILE* input){
	char c;
	fseek(input, posicao_inicial, SEEK_SET);
	printf(" ");
	for(int i=posicao_inicial;i<posicao_final;i++){
		c = fgetc(input);
		if(c != '\n' && c != EOF && c != ' ')
			printf("%c", c);
	}
}
*/

void continuarLeitura(int *estado_atual, int *proximo_estado, int *c_posicao_atual, int *ultimo_final, int* c_ult_fin_recon){
	*estado_atual = *proximo_estado;
	(*c_posicao_atual)++;
	if(getEstado(*estado_atual) != TOKEN_ERROR){
		*ultimo_final = *estado_atual;
		*c_ult_fin_recon = *c_posicao_atual;
	}
}

token_type reiniciarLeitura(char input_atual, int* ultimo_final, int* estado_atual, int* c_inicio_leitura, int* c_posicao_atual,
						int* c_ult_fin_recon, FILE* input_file){
	token_type token = getEstado(*estado_atual);

	int tamanhoString = *c_posicao_atual - *c_inicio_leitura;
	setColuna(getColuna() + tamanhoString);
	if(input_atual != EOF){
		fseek(file_in, *c_inicio_leitura, SEEK_SET);
		if(tamanhoString+1 <= 63){
			fgets(last_read_token, tamanhoString+1, file_in);
		}else{
			fgets(last_read_token, 63, file_in);
		}
	}
	
	//Cadeia reconhecida, cursor em estado final
	if(*ultimo_final != 0 && token != TOKEN_ERROR){
		*c_inicio_leitura = *c_posicao_atual;
	}
	//Cadeia reconhecida, mas cursor em estado não final
	else if(*ultimo_final!=0 && token==TOKEN_ERROR){
		// token = getEstado(*c_ult_fin_recon);
		*c_inicio_leitura = *c_ult_fin_recon;
		*c_posicao_atual = *c_ult_fin_recon;
		lex_error = input_atual;
	}
	//cadeia não reconhecida
	else{
		(*c_inicio_leitura)++;
		(*c_posicao_atual)++;
		lex_error = input_atual;
	}
	
	if(input_atual != EOF){
		fseek(input_file, *c_inicio_leitura, SEEK_SET);
	}

	return token;
}

token_type getToken(FILE* file_in){
	int estado_atual     = estado_inicial;
	int ultimo_final     = 0;
	static int c_posicao_atual  = 0;
	int c_inicio_leitura = c_posicao_atual;
	int c_ult_fin_recon  = 0;
	char input_atual     = '\0';

	while(true){
		if(feof(file_in)){
			return TOKEN_EOF;
		}
		input_atual = fgetc(file_in);

		int proximo_estado = estados[estado_atual][selecionarPosicao(input_atual)];
		if(proximo_estado==0){
			return reiniciarLeitura(input_atual, &ultimo_final, &estado_atual, &c_inicio_leitura, &c_posicao_atual, &c_ult_fin_recon, file_in);
		}else{
			continuarLeitura(&estado_atual, &proximo_estado, &c_posicao_atual, &ultimo_final, &c_ult_fin_recon);
		}

	}
}
